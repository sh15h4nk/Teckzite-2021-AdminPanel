{% extends "layout.html" %}
{% import "bootstrap/wtf.html" as wtf%}

{% block title %}
Update Workshop 
{% endblock %}

{% block styles %}
{{ super() }}
<style>

img {
    max-width: 100%;
    height: auto;
}

.item {
    display: block;
    width: 600px;
    min-height: 300px;
    max-height: auto;
    float: left;
    margin: 3px;
    padding: 3px;
    background-color: skyblue;
}

</style>
<link rel="stylesheet" href="/static/cropperjs-master/dist/cropper.css"/>

{% endblock %}

{% block content %}
{{ super() }}
<center><h1>Update Workshop</h1></center>
<div class="container">
    <form class = 'form' method="post">
        
        {{ form.csrf_token }}
        {% if current_user.role == 1 %}
        	{{ wtf.form_field(form.title, value = workshop.title) }}
        {% else %}
        	{{ wtf.form_field(form.title, value = workshop.title, readonly=true) }}
        {% endif %}
        {{ wtf.form_field(form.fee, value = workshop.fee) }}

        <input type="hidden" id="hidden-status" name="hidden-status" value="{{ markup.status }}">
        {{ wtf.form_field(form.status) }}

        <input type="hidden" id="hidden-description" name="hidden-description" value="{{ markup.description }}">
        {{ wtf.form_field(form.description) }}

        <input type="hidden" id="hidden-about" name="hidden-about" value="{{ markup.about }}">
        {{ wtf.form_field(form.about) }}

        <input type="hidden" id="hidden-timeline" name="hidden-timeline" value="{{ markup.timeline }}">
        {{ wtf.form_field(form.timeline) }}

        <input type="hidden" id="hidden-resources" name="hidden-resources" value="{{ markup.resources }}">
        {{ wtf.form_field(form.resources) }}


        <input type="file" class="input-image">
        <div class="item">
            <img class="image_preview" src="{{workshop.image_url}}" alt="Add your image"> 
        </div>

        {{ form.photo.csrf_token }}
        {{ wtf.form_field(form.photo.image, class="hide image")}}
        {{ wtf.form_field(form.photo.cropX, class="hide cropX")}}
        {{ wtf.form_field(form.photo.cropY, class="hide cropY")}}
        {{ wtf.form_field(form.photo.cropWidth, class="hide cropWidth")}}
        {{ wtf.form_field(form.photo.cropHeight, class="hide cropHeight")}}

        <button type="submit" class="btn btn-primary" name="update-workshop" value="{{workshop.id}}">Submit</button>
        <button type="submit" class="btn btn-primary" name="update-contacts-from" value="{{workshop.id}}">Update contacts</button>
        <button type="submit" class="btn btn-primary" name="update-faqs-from" value="{{workshop.id}}">Update FAQs</button>
        <button type="submit" class="btn btn-primary" name="update-sponsors-from" value="{{workshop.id}}">Update Sponsor</button>

    </form>
</div>

{% block javascript %}

<script src="/static/cropperjs-master/dist/cropper.js"></script>
<script src="/static/imageUpload.js"></script>

<script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
<script>
	$(document).ready(function () {
		CKEDITOR.instances.status.setData( document.getElementById("hidden-status").value );
		CKEDITOR.instances.description.setData( document.getElementById("hidden-description").value );
		CKEDITOR.instances.about.setData( document.getElementById("hidden-about").value );
		CKEDITOR.instances.timeline.setData( document.getElementById("hidden-timeline").value );
		CKEDITOR.instances.resources.setData( document.getElementById("hidden-resources").value );
	});
   
</script>



{% endblock %}
    
{{ ckeditor.load() }}

{% endblock %}